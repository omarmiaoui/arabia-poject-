<!DOCTYPE html>
<html lang="ar" dir="rtl">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ุงูุญุจ ูุงูุตุฏุงูุฉ ูู ุงูุดุจุงุจ - ุฑุญูุฉ ูู ุนุงูู ุงูุนูุงูุงุช</title>
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Chart.js -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.3/dist/chart.umd.min.js"></script>
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;800&display=swap" rel="stylesheet">
    <!-- Custom CSS -->
    <style>
        /* Global Styles */
        body {
            font-family: 'Inter', Tahoma, Arial, "Helvetica Neue", sans-serif;
            background: linear-gradient(135deg, #f0f4f8 0%, #d9e2ec 100%);
            color: #1a202c;
            min-height: 100vh;
            overflow-x: hidden;
            /* Prevent horizontal scroll */
        }

        /* Utilities */
        .container-shadow {
            box-shadow: 0 20px 40px -5px rgba(0, 0, 0, 0.1), 0 10px 20px -5px rgba(0, 0, 0, 0.04);
        }

        .transition-all-300 {
            transition: all 0.3s ease-in-out;
        }

        /* Navigation */
        .nav-btn {
            transition: all 0.3s ease;
        }

        .nav-btn:hover {
            transform: translateY(-2px);
        }

        .nav-btn.active {
            background: linear-gradient(90deg, #2563eb, #4f46e5);
            color: white;
            font-weight: bold;
            box-shadow: 0 4px 12px rgba(37, 99, 235, 0.3);
        }

        /* Page Transitions */
        .page-content {
            display: none;
            opacity: 0;
            transform: translateY(20px);
            transition: opacity 0.5s ease-out, transform 0.5s ease-out;
        }

        .page-content.active {
            display: block;
            opacity: 1;
            transform: translateY(0);
        }

        /* Cards & Features */
        .feature-card {
            transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            border-left: 4px solid transparent;
        }

        .feature-card:hover {
            transform: translateY(-8px) scale(1.02);
            border-left-color: #3b82f6;
            box-shadow: 0 20px 30px rgba(0, 0, 0, 0.1);
        }

        .quote-card {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border-radius: 1rem;
            padding: 3rem;
            position: relative;
            overflow: hidden;
            box-shadow: 0 10px 25px rgba(118, 75, 162, 0.3);
        }

        .quote-card::before {
            content: '"';
            position: absolute;
            top: -20px;
            right: 20px;
            font-size: 150px;
            opacity: 0.15;
            font-family: Georgia, serif;
        }

        /* Stats & Charts */
        .stats-card {
            background-color: #fff;
            padding: 2rem;
            border-radius: 1.5rem;
            border: 1px solid #e2e8f0;
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1);
            transition: all 0.6s cubic-bezier(0.4, 0, 0.2, 1);
            max-height: 0;
            overflow: hidden;
            opacity: 0;
            transform: scale(0.95);
        }

        .stats-card.visible {
            max-height: 2000px;
            opacity: 1;
            transform: scale(1);
            margin-top: 2rem;
        }

        .chart-container {
            height: 350px;
            position: relative;
            width: 100%;
        }

        @media (max-width: 640px) {
            .chart-container {
                height: 250px;
            }
        }

        /* Tables */
        .comparison-table {
            border-collapse: separate;
            border-spacing: 0;
            width: 100%;
            border-radius: 0.75rem;
            overflow: hidden;
            border: 1px solid #e2e8f0;
        }

        .comparison-table th,
        .comparison-table td {
            padding: 1.25rem;
            text-align: right;
            border-bottom: 1px solid #e2e8f0;
        }

        .comparison-table th {
            background-color: #f8fafc;
            font-weight: 700;
            color: #1e3a8a;
            text-transform: uppercase;
            font-size: 0.85rem;
            letter-spacing: 0.05em;
        }

        .comparison-table tr:last-child td {
            border-bottom: none;
        }

        .comparison-table tr:hover td {
            background-color: #f8fafc;
        }

        /* LLM Modal */
        .llm-modal-backdrop {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.6);
            backdrop-filter: blur(4px);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 50;
            animation: fadeIn 0.3s ease-out;
        }

        .llm-modal {
            background-color: white;
            padding: 2rem;
            border-radius: 1.5rem;
            max-width: 90%;
            width: 650px;
            box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.25);
            max-height: 90vh;
            overflow-y: auto;
            animation: slideUp 0.3s ease-out;
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
            }

            to {
                opacity: 1;
            }
        }

        @keyframes slideUp {
            from {
                transform: translateY(20px);
                opacity: 0;
            }

            to {
                transform: translateY(0);
                opacity: 1;
            }
        }

        .gemini-response p {
            margin-bottom: 0.75rem;
        }

        .gemini-response ul {
            list-style-type: disc;
            margin-right: 1.5rem;
            margin-bottom: 1rem;
        }

        .gemini-response strong {
            color: #2563eb;
        }

        /* Floating Buttons */
        .floating-btn-container {
            position: fixed;
            bottom: 2rem;
            left: 2rem;
            display: flex;
            flex-direction: column;
            gap: 1rem;
            z-index: 40;
        }

        .floating-btn {
            width: 3.5rem;
            height: 3.5rem;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.2);
            transition: transform 0.3s cubic-bezier(0.34, 1.56, 0.64, 1);
            cursor: pointer;
        }

        .floating-btn:hover {
            transform: scale(1.1) rotate(5deg);
        }

        /* Progress Bar */
        .progress-container {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 6px;
            background-color: rgba(229, 231, 235, 0.5);
            z-index: 60;
        }

        .progress-bar {
            height: 100%;
            background: linear-gradient(90deg, #3b82f6, #8b5cf6, #ec4899);
            width: 0%;
            transition: width 0.3s ease-out;
            border-radius: 0 3px 3px 0;
        }

        /* Mobile Adjustments */
        @media (max-width: 768px) {
            .mobile-padding {
                padding-left: 1rem;
                padding-right: 1rem;
            }

            .mobile-text-center {
                text-align: center;
            }
        }
    </style>
</head>

<body class="antialiased">

    <!-- Progress Bar -->
    <div class="progress-container">
        <div id="progress-bar" class="progress-bar"></div>
    </div>

    <!-- Floating Buttons -->
    <div class="floating-btn-container">
        <!-- Help Button -->
        <button
            onclick="showLLMModal('ูุณุงุนุฏุฉ ุณุฑูุนุฉ', 'ููู ูููููู ูุณุงุนุฏุชู ุงููููุ', 'analyzeRelationshipQuestion()', 'ุงูุชุจ ุณุคุงูู ููุง...', 'โจ ุงุญุตู ุนูู ุงููุณุงุนุฏุฉ')"
            class="floating-btn bg-blue-600 text-white hover:bg-blue-700" title="ูุณุงุนุฏุฉ ุณุฑูุนุฉ">
            <span class="text-2xl">ุ</span>
        </button>

        <!-- Read Project Button (TTS) -->
        <button id="reader-btn" onclick="toggleReader()" class="floating-btn bg-green-600 text-white hover:bg-green-700"
            title="ูุฑุงุกุฉ ุงูุตูุญุฉ">
            <span class="text-xl">๐</span>
        </button>
    </div>

    <!-- LLM Modal Container -->
    <div id="llm-modal-container" class="hidden"></div>

    <!-- ============================================== -->
    <!--          Landing Page (Presentation)           -->
    <!-- ============================================== -->
    <div id="presentation-page" class="page-content active min-h-screen flex items-center justify-center p-4">
        <div
            class="max-w-5xl mx-auto w-full bg-white rounded-3xl container-shadow p-8 md:p-12 text-center relative overflow-hidden">
            <!-- Decorative Background Elements -->
            <div
                class="absolute top-0 left-0 w-64 h-64 bg-blue-100 rounded-full mix-blend-multiply filter blur-3xl opacity-30 -translate-x-1/2 -translate-y-1/2">
            </div>
            <div
                class="absolute bottom-0 right-0 w-64 h-64 bg-purple-100 rounded-full mix-blend-multiply filter blur-3xl opacity-30 translate-x-1/2 translate-y-1/2">
            </div>

            <div class="relative z-10">
                <span
                    class="inline-block py-1 px-3 rounded-full bg-blue-50 text-blue-600 text-sm font-semibold mb-4 tracking-wide">ูุดุฑูุน
                    ุชูุงุนูู</span>
                <h1
                    class="text-5xl md:text-7xl font-extrabold text-transparent bg-clip-text bg-gradient-to-r from-blue-700 to-purple-600 mb-6 pb-2">
                    ุฑุญูุฉ ูู ุนุงูู ุงูุดุจุงุจ
                </h1>
                <p class="text-xl md:text-2xl text-gray-600 mb-8 max-w-3xl mx-auto leading-relaxed">
                    ุงูุชุดู ููู ุชุชุดุงุจู ุฎููุท <span class="font-bold text-blue-600">ุงูุญุจ ูุงูุตุฏุงูุฉ</span> ูุชุดูู ุงูุฃุณุงุณ
                    ุงูุนุงุทูู ูุงูุงุฌุชูุงุนู ูู ุฃูู ูุฑุงุญู ุจูุงุก ุงููููุฉ. ุชุญููู ูุนูู ูุฃูููุฉ ุงูุตุฏุงูุฉ ููุงุนุฏุฉุ ูุธููุฑ ุงูุญุจ ูุชุฌุฑุจุฉ
                    ููุซูุฉ.
                </p>

                <div
                    class="inline-flex items-center justify-center space-x-2 space-x-reverse bg-gray-50 border border-gray-200 rounded-full px-6 py-2 mb-10 text-gray-500 text-sm">
                    <span>ุจุชูุฏูู ูู:</span>
                    <span class="font-semibold text-gray-700">ุนูุฑ ุงูููุนุงูู | ุนุตุงู ูู | ูุญูุฏ ุนุฒุฑู | ุฅุณูุงู | ูุฑูู ุนุดูู |
                        ูุนูุฏ ููุฌ ุงูุนุทุงุฑูู</span>
                </div>

                <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-12">
                    <div class="feature-card p-6 bg-white rounded-2xl border border-gray-100 shadow-sm hover:shadow-md">
                        <div
                            class="w-14 h-14 bg-blue-100 rounded-2xl flex items-center justify-center text-3xl mb-4 mx-auto text-blue-600">
                            ๐ฅ</div>
                        <h3 class="text-lg font-bold text-gray-800 mb-2">ุชุญููู ุงูุนูุงูุงุช</h3>
                        <p class="text-gray-500 text-sm">ุงูุชุดู ุฏููุงููููุงุช ุงูุตุฏุงูุฉ ูุงูุญุจ ูุชุฃุซูุฑูุง ุนูู ุญูุงุชู</p>
                    </div>
                    <div class="feature-card p-6 bg-white rounded-2xl border border-gray-100 shadow-sm hover:shadow-md">
                        <div
                            class="w-14 h-14 bg-green-100 rounded-2xl flex items-center justify-center text-3xl mb-4 mx-auto text-green-600">
                            ๐</div>
                        <h3 class="text-lg font-bold text-gray-800 mb-2">ูุคุดุฑุงุช ุงููุฌุงุญ</h3>
                        <p class="text-gray-500 text-sm">ุชุนุฑู ุนูู ููู ุชุฏุนู ุงูุนูุงูุงุช ูุณุงุฑู ุงููููู ูุงูุดุฎุตู</p>
                    </div>
                    <div class="feature-card p-6 bg-white rounded-2xl border border-gray-100 shadow-sm hover:shadow-md">
                        <div
                            class="w-14 h-14 bg-purple-100 rounded-2xl flex items-center justify-center text-3xl mb-4 mx-auto text-purple-600">
                            ๐ค</div>
                        <h3 class="text-lg font-bold text-gray-800 mb-2">ูุณุงุนุฏ ุฐูู</h3>
                        <p class="text-gray-500 text-sm">ุงุณุชูุฏ ูู ุงูุฐูุงุก ุงูุงุตุทูุงุนู ูุชุญููู ุชุญุฏูุงุชู ููุถุน ุฃูุฏุงูู</p>
                    </div>
                </div>

                <button onclick="showPage('analysis-page')"
                    class="group relative inline-flex items-center justify-center px-8 py-4 font-bold text-white transition-all duration-200 bg-blue-600 font-lg rounded-full hover:bg-blue-700 hover:shadow-lg hover:-translate-y-1 focus:outline-none ring-offset-2 focus:ring-2">
                    <span>ุงุจุฏุฃ ุงูุชุญููู ุงูุขู</span>
                    <svg class="w-5 h-5 mr-2 -ml-1 transition-transform group-hover:-translate-x-1"
                        xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor">
                        <path fill-rule="evenodd"
                            d="M10.293 3.293a1 1 0 011.414 0l6 6a1 1 0 010 1.414l-6 6a1 1 0 01-1.414-1.414L14.586 11H3a1 1 0 110-2h11.586l-4.293-4.293a1 1 0 010-1.414z"
                            clip-rule="evenodd" />
                    </svg>
                </button>
            </div>
        </div>
    </div>

    <!-- ============================================== -->
    <!--          Navigation Bar                        -->
    <!-- ============================================== -->
    <nav id="main-nav"
        class="hidden fixed top-4 left-1/2 transform -translate-x-1/2 bg-white/90 backdrop-blur-md p-2 rounded-full shadow-lg z-30 border border-gray-100 transition-all duration-300 w-[90%] md:w-auto">
        <div class="flex flex-row justify-center space-x-2 space-x-reverse w-full">
            <button onclick="showPage('analysis-page')"
                class="nav-btn py-2 px-6 text-gray-600 rounded-full hover:bg-gray-50 transition text-sm md:text-base flex items-center whitespace-nowrap">
                <span class="hidden md:inline mr-2">โค๏ธ</span> ุชุญููู ุงูุญุจ ูุงูุตุฏุงูุฉ
            </button>
            <button onclick="showPage('success-page')"
                class="nav-btn py-2 px-6 text-gray-600 rounded-full hover:bg-gray-50 transition text-sm md:text-base flex items-center whitespace-nowrap">
                <span class="hidden md:inline mr-2">๐</span> ุงูุนูุงูุงุช ูุฏูุน ุงููุฌุงุญ
            </button>
            <button onclick="showPage('resources-page')"
                class="nav-btn py-2 px-6 text-gray-600 rounded-full hover:bg-gray-50 transition text-sm md:text-base flex items-center whitespace-nowrap">
                <span class="hidden md:inline mr-2">๐</span> ููุงุฑุฏ ููุตุงุฆุญ
            </button>
        </div>
    </nav>

    <!-- ============================================== -->
    <!--          Analysis Page                         -->
    <!-- ============================================== -->
    <div id="analysis-page" class="page-content pt-24 pb-12 px-4">
        <div class="max-w-4xl mx-auto bg-white rounded-3xl container-shadow overflow-hidden">
            <header
                class="bg-gradient-to-r from-blue-600 to-purple-600 text-white p-10 text-center relative overflow-hidden">
                <div class="relative z-10">
                    <h1 class="text-3xl md:text-4xl font-extrabold mb-3">ุงูุนูุงูุฉ ุงููุชุดุงุจูุฉ: ุงูุญุจ ูุงูุตุฏุงูุฉ ูู ุงูุดุจุงุจ</h1>
                    <p class="text-blue-100 text-lg">ุชุญููู ูุญูุฑู ููุชุทูุฑ ุงูุนุงุทูู ูุงูุงุฌุชูุงุนู ูู ูุฐู ุงููุฑุญูุฉ ุงูุนูุฑูุฉ</p>
                </div>
            </header>

            <div class="p-8 md:p-12 space-y-12">
                <!-- AI Feature -->
                <div
                    class="bg-gradient-to-br from-blue-50 to-purple-50 rounded-2xl p-8 text-center border border-blue-100">
                    <button
                        onclick="showLLMModal('โจ ุชุญููู ุณุคุงู ุนู ุงูุนูุงูุงุช', 'ุงูุชุจ ุณุคุงูู ุฃู ุณููุงุฑูู ุญูู ุชุญุฏูุงุช ุงูุนูุงูุฉ (ุตุฏุงูุฉ ุฃู ุญุจ) ููุญุตูู ุนูู ุชุญููู ููุตูุญุฉ ูุชูุงุฒูุฉ ูู ุฎุจูุฑ ุงูุนูุงูุงุช ูุฏููุง.', 'analyzeRelationshipQuestion()', 'ูุซุงู: ููู ุฃูุงุฒู ุจูู ูุถุงุก ุงูููุช ูุน ุดุฑููู ูุฃุตุฏูุงุฆู ุงูููุฑุจูู ุฏูู ุฃู ูุดุนุฑ ุฃุญุฏูู ุจุงูุฅููุงูุ', 'โจ ุชุญููู ุงูุณุคุงู')"
                        class="bg-blue-600 hover:bg-blue-700 text-white font-bold py-3 px-8 rounded-full text-lg transition duration-300 ease-in-out transform hover:scale-105 shadow-md flex items-center justify-center mx-auto">
                        <span class="ml-2">๐ค</span>
                        โจ ุชุญููู ุณุคุงู ุนู ุงูุนูุงูุงุช (Gemini)
                    </button>
                </div>

                <!-- Intro -->
                <section>
                    <p class="text-lg leading-relaxed text-gray-700">
                        ุงูุนูุงูุฉ ุจูู <span class="font-bold text-blue-800">ุงูุดุจุงุจ</span> ูู ูุฌุงู ุงูุญุจ ูุงูุตุฏุงูุฉ ูู ุนูุงูุฉ
                        ูุชุฏุงุฎูุฉ ููุญูุฑูุฉ ูู ูุฐู ุงููุฑุญูุฉ ุงูุนูุฑูุฉุ ุญูุซ ุชุนุชุจุฑ ูู ููููุง ุฃุณุงุณุงู ูุชุทูุฑูู ุงูุนุงุทูู ูุงูุงุฌุชูุงุนู.
                    </p>
                </section>

                <!-- Section 1 -->
                <section class="p-6 bg-green-50 rounded-xl border border-green-200">
                    <div class="flex items-center mb-6">
                        <h2 class="text-2xl font-bold text-green-700 flex items-center">
                            <span class="ml-2">๐ฅ</span>
                            1. ุฃูููุฉ ุงูุตุฏุงูุฉ (ุงูุตุฏุงูุฉ ููุงุนุฏุฉ)
                        </h2>
                    </div>
                    <p class="text-gray-600 mb-5">ุชูุนุฏ ุงูุตุฏุงูุฉ ูู ูุฑุญูุฉ ุงูุดุจุงุจ ุจูุซุงุจุฉ ุงูุฑููุฒุฉ ุงูุฃุณุงุณูุฉ ุงูุชู ูุชุนูู ูููุง
                        ุงูุดุงุจ ููููุฉ ุจูุงุก ุงูุนูุงูุงุช ุงูุญูููุฉ ุฎุงุฑุฌ ูุทุงู ุงูุฃุณุฑุฉ.</p>

                    <div class="space-y-4">
                        <div class="flex items-start">
                            <span class="text-xl text-green-600 ml-3 mt-1">โ</span>
                            <p class="flex-1 text-gray-700"><span class="font-semibold">ุชุทููุฑ ุงูููุงุฑุงุช
                                    ุงูุงุฌุชูุงุนูุฉ:</span> ูุชุนูู ุงูุดุจุงุจ ูู ุฎูุงู ุงูุตุฏุงูุฉ ููุงุฑุงุช ุฃุณุงุณูุฉ ูุซู **ุงูุชุนุงุทูุ ุญู
                                ุงููุฒุงุนุงุชุ ุงูุชุนุจูุฑ ุนู ุงููุดุงุนุฑุ ูุชูุฏูู ุงูุฏุนู**. ูุฐู ุงูููุงุฑุงุช ุถุฑูุฑูุฉ ูุฃู ุนูุงูุฉ ูุณุชูุจููุฉ.
                            </p>
                        </div>
                        <div class="flex items-start">
                            <span class="text-xl text-green-600 ml-3 mt-1">โ</span>
                            <p class="flex-1 text-gray-700"><span class="font-semibold">ุจูุงุก ุงููููุฉ:</span> ุชูุนุฏ ุงูุตุฏุงูุฉ
                                ูุฑุขุฉ ููุดุงุจุ ุญูุซ ุชุณุงุนุฏู ูู ุงุณุชูุดุงู ูููุชู ููููู ูุงูุชูุงูุงุชู ุงูุฎุงุตุฉ ูู ุฎูุงู ุงูุชูุงุนู
                                ูุงูููุงุฑูุฉ ูุน ุงูุฃูุฑุงู.</p>
                        </div>
                        <div class="flex items-start">
                            <span class="text-xl text-green-600 ml-3 mt-1">โ</span>
                            <p class="flex-1 text-gray-700"><span class="font-semibold">ุงูุฏุนู ุงูุนุงุทูู:</span> ูููุฑ
                                ุงูุฃุตุฏูุงุก ุงูููุฑุจูู ูุตุฏุฑุงู ุฑุฆูุณูุงู ููุซูุฉ ูุงูุฏุนู ุงูุนุงุทููุ ููุตุจุญูู ูู ุงูุฃุดุฎุงุต ุงูุฐูู ููุฌุฃ
                                ุฅูููู ุงูุดุงุจ ูููุงูุดุฉ ุฃุนูู ูุดุงููู ูุดุคููู ุงูุดุฎุตูุฉ.</p>
                        </div>
                    </div>
                </section>

                <!-- Section 2 -->
                <section class="p-6 bg-red-50 rounded-xl border border-red-200">
                    <div class="flex items-center mb-6">
                        <h2 class="text-2xl font-bold text-red-700 flex items-center">
                            <span class="ml-2">โค๏ธ</span>
                            2. ุธููุฑ ุงูุญุจ (ุงูุนูุงูุงุช ุงูุฑููุงูุณูุฉ)
                        </h2>
                    </div>
                    <p class="text-gray-600 mb-5">ุงูุนูุงูุงุช ุงูุนุงุทููุฉ (ุงูุญุจ ุงูุฑููุงูุณู) ุชุจุฏุฃ ุจุงูุธููุฑ ูู ูุฑุญูุฉ ุงูุดุจุงุจุ ูุชุฃุชู
                        ูุน ุชุญุฏูุงุช ููุดุงุนุฑ ุฌุฏูุฏุฉ:</p>

                    <div class="space-y-4">
                        <div class="flex items-start">
                            <span class="text-xl text-red-600 ml-3 mt-1">โค๏ธ</span>
                            <p class="flex-1 text-gray-700"><span class="font-semibold">ุงููุซุงูุฉ ุงูุนุงุทููุฉ:</span> ูุชุณู
                                ุงูุญุจ ูู ุณู ุงูุดุจุงุจ ุจูููู ุชุฌุฑุจุฉ ุนุงุทููุฉ ุดุฏูุฏุฉ ูููุซูุฉุ ููุฏ ุชุชุฑุงูุญ ุงููุดุงุนุฑ ูููุง ุจูู ุงูุณุนุงุฏุฉ
                                ุงูุบุงูุฑุฉ ูุงูููู ูุงูุบูุฑุฉ.</p>
                        </div>
                        <div class="flex items-start">
                            <span class="text-xl text-red-600 ml-3 mt-1">โค๏ธ</span>
                            <p class="flex-1 text-gray-700"><span class="font-semibold">ุงูุดุบู ูุงูุชูุฑุฏ:</span> ูุฎุชูู ุงูุญุจ
                                ุนู ุงูุตุฏุงูุฉ ุจูุฌูุฏ ุนูุตุฑ ุงูุดุบู ูุงูุฑุบุจุฉ ูู ุงูุชูุฑุฏ ุจุงูุดุฑููุ ููุง ูุฌุนู ุงูุนูุงูุฉ ุฃูุซุฑ ุชุฑููุฒุงู
                                ูุฃูู ุงุชุณุงุนุงู ูู ุดุจูุฉ ุงูุฃุตุฏูุงุก.</p>
                        </div>
                        <div class="flex items-start">
                            <span class="text-xl text-red-600 ml-3 mt-1">โค๏ธ</span>
                            <p class="flex-1 text-gray-700"><span class="font-semibold">ุงูุชุดุงู ุงูุฐุงุช ูู ุงูุนูุงูุฉ:</span>
                                ูููุธุฑ ุฅูู ูุฐู ุงูุนูุงูุงุช ูุดูู ูู ุฃุดูุงู ุชุทููุฑ ุงูุฐุงุชุ ุญูุซ ูุชุนูู ุงูุดุงุจ ููููุฉ ุงูุชูุงูุถ ุนูู
                                ุงูุญุฏูุฏ ุงูุดุฎุตูุฉุ ุฅุฏุงุฑุฉ ูุดุงุนุฑ ุงูุชุนููุ ูููุงุฒูุฉ ููุชู ุจูู ุงูุดุฑูู ูุงูุฃุตุฏูุงุก.</p>
                        </div>
                    </div>
                </section>

                <!-- Comparison Table -->
                <section>
                    <h2 class="text-2xl font-bold text-blue-800 mb-5 border-b-2 pb-2 border-blue-200 flex items-center">
                        <span class="ml-2">๐</span>
                        3. ุงูุนูุงูุฉ ุงููุชุดุงุจูุฉ ุจููููุง
                    </h2>
                    <div class="overflow-x-auto rounded-lg border border-gray-200">
                        <table class="comparison-table w-full text-sm">
                            <thead class="bg-gray-100">
                                <tr>
                                    <th class="w-1/4 min-w-[80px]">ุงูุฌุงูุจ</th>
                                    <th class="w-1/4 min-w-[150px]">ุงูุชุฏุงุฎู ูุงูุงุชุตุงู</th>
                                    <th class="w-1/2 min-w-[200px]">ููุทุฉ ุงูุชูุชุฑ ูุงูุงุฎุชูุงู</th>
                                </tr>
                            </thead>
                            <tbody class="divide-y divide-gray-100">
                                <tr>
                                    <td class="font-semibold text-gray-800">ุงูุฃุณุงุณ</td>
                                    <td>**ุชุชุญูู ุงูุนุฏูุฏ ูู ุนูุงูุงุช ุงูุตุฏุงูุฉ ุฅูู ุนูุงูุงุช ุญุจ**ุ ุญูุซ ูููุฑ ุงูุฃุณุงุณ ุงูููู ูู ุงูุซูุฉ
                                        ูุงูุชูุงูู ููุทุฉ ุงูุทูุงู ุตุญูุฉ ููุงุฑุชุจุงุท ุงูุฑููุงูุณู.</td>
                                    <td>ูุถูู ุงูุญุจ ุนูุตุฑ **ุงูุบูุฑุฉ ูุงูุชููู** ูุงูุงูุชุฒุงู ุงูุญุตุฑูุ ููุง ูุฏ ูุบูุจ ูู ุงูุตุฏุงูุฉ.</td>
                                </tr>
                                <tr>
                                    <td class="font-semibold text-gray-800">ุงูุงุณุชูุฑุงุฑ</td>
                                    <td>ุงูุตุฏุงูุงุช ุนุงุฏุฉ ูุง ุชููู ุฃูุซุฑ **ุงุณุชูุฑุงุฑุงู ูุฏูุงูุงู** ุฎูุงู ุงูุชููุจุงุช ุงูุนุงุทููุฉ ููุดุจุงุจ.
                                    </td>
                                    <td>ูููู ููุนูุงูุงุช ุงูุนุงุทููุฉ ุฃู ุชุณุชููู ููุช ูุทุงูุฉ **ุงูุดุงุจ**ุ ููุง ูุฏ ูุคุฏู ุฅูู ุฅููุงู
                                        ุงูุตุฏุงูุงุช ุงููุฏููุฉ ูุชุถููู ุงูุฏุงุฆุฑุฉ ุงูุงุฌุชูุงุนูุฉ.</td>
                                </tr>
                                <tr>
                                    <td class="font-semibold text-gray-800">ุงูุชุฃุซูุฑ ุงููุชุจุงุฏู</td>
                                    <td>ุฌูุฏุฉ ุงูุตุฏุงูุงุช ุงููุจูุฑุฉ ุชุชูุจุฃ ุจูุฏุฑุฉ ุงูุดุงุจ ุนูู ุจูุงุก **ุนูุงูุฉ ุญุจ ุตุญูุฉ** ูุงุฆูุฉ ุนูู
                                        ุงูุซูุฉ ูุงููุฏ.</td>
                                    <td>ุงููุตุงู ุงูุนูุงูุฉ ุงูุนุงุทููุฉ ูููู ุนุงุฏุฉ ุฃูุซุฑ ุฅููุงูุงู **ูุชุฃุซูุฑุงู** ุนูู ุงูุตุญุฉ ุงูููุณูุฉ ูู
                                        ุงูุฎูุงูุงุช ูุน ุงูุฃุตุฏูุงุก.</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </section>

                <div class="quote-card">
                    <p class="text-xl md:text-2xl font-serif italic text-center leading-relaxed">
                        "ุงูุตุฏุงูุฉ ูู ุงูุฃุฑุถ ุงูุฎุตุจุฉ ุงูุชู ุชููู ูููุง ุจุฐูุฑ ุงูุญุจุ ูุงูุญุจ ูู ุงูุดุฌุฑุฉ ุงูุชู ุชุฒูุฑ ูู ุชุฑุจุฉ ุงูุตุฏุงูุฉ."
                    </p>
                </div>
            </div>

            <!-- Footer -->
            <footer class="p-6 md:p-8 bg-gray-100 text-center text-gray-600 rounded-b-3xl">
                <p class="text-sm">ูุฐุง ุงููุญุชูู ูู ุชุญููู ูุจูู ุนูู ุงูุฏุฑุงุณุงุช ุงูููุณูุฉ ูุงูุงุฌุชูุงุนูุฉ ููุฑุญูุฉ ุงูุดุจุงุจ.</p>
            </footer>
        </div>
    </div>

    <!-- ============================================== -->
    <!--          Success Page                          -->
    <!-- ============================================== -->
    <div id="success-page" class="page-content pt-24 pb-12 px-4">
        <div class="max-w-4xl mx-auto bg-white rounded-3xl container-shadow overflow-hidden">
            <header class="bg-gradient-to-r from-indigo-600 to-purple-600 text-white p-10 text-center">
                <h1 class="text-3xl md:text-4xl font-extrabold mb-3">ุงูุนูุงูุงุช ููุญุฑู ูููุฌุงุญ</h1>
                <p class="text-purple-100 text-lg">ููู ุชุฏุนู ุงูุตุฏุงูุฉ ูุงูุญุจ ูุณูุฑุฉ ุงูุดุงุจ ูุญู ุงูุฅูุฌุงุฒ ุงูุดุฎุตู ูุงููููู.</p>
            </header>

            <div class="p-8 md:p-12 space-y-12">
                <!-- AI Feature -->
                <div
                    class="bg-gradient-to-br from-indigo-100 to-purple-100 rounded-2xl p-8 text-center border border-indigo-200">
                    <button
                        onclick="showLLMModal('โจ ุตูุงุบุฉ ูุฏู ุดุฎุตู/ูููู', 'ุงูุชุจ ููุฑุฉ ูุฏูู ุงูุญุงูู (ูุซุงู: ุฃุฑูุฏ ุฃู ุฃููู ูุณุชููุงู ูุงุฏูุงูุ ุฃู ุฃุฑูุฏ ุฃู ุฃุฌุฏ ูุธููุฉ ุฃุญุจูุง) ูุณูุณุงุนุฏู ูู ุชุญูููู ุฅูู ูุฏู ูุญุฏุฏ ููุนูุงู (SMART Goal).', 'draftPersonalGoal()', 'ูุซุงู: ุฃุฑูุฏ ุฃู ุฃุทูุฑ ููุงุฑุงุชู ูู ุงูุจุฑูุฌุฉ ูุฃุฌุฏ ูุธููุฉ ููุงุณุจุฉ ุจุนุฏ ุนุงู ูู ุงูุขู.', 'โจ ุตูุงุบุฉ ุงููุฏู')"
                        class="bg-indigo-600 hover:bg-indigo-700 text-white font-bold py-3 px-8 rounded-full text-lg transition duration-300 ease-in-out transform hover:scale-105 shadow-md flex items-center justify-center mx-auto">
                        <span class="ml-2">๐ฏ</span>
                        โจ ุตูุงุบุฉ ูุฏู ุดุฎุตู/ูููู (Gemini)
                    </button>
                </div>

                <!-- Friendship Success -->
                <section class="p-6 bg-yellow-50 rounded-xl border border-yellow-200">
                    <h2 class="text-2xl font-bold text-yellow-700 mb-4 flex items-center">
                        <span class="ml-2">โญ</span>
                        ุงูุตุฏุงูุฉ ูุฒูุงุฏุฉ ุงููุฌุงุญ ุงููููู
                    </h2>

                    <div class="space-y-4">
                        <div class="flex items-start">
                            <span class="text-xl text-yellow-600 ml-3 mt-1">โ</span>
                            <p class="flex-1 text-gray-700"><span class="font-semibold">ุดุจูุฉ ุงูุฏุนู ูุงููุฑุต:</span>
                                ุงูุฃุตุฏูุงุก ููุณุนูู ุงูุดุจูุฉ ุงูุงุฌุชูุงุนูุฉ ูุงูููููุฉุ ูุบุงูุจุงู ูุง ูููููู ูุตุฏุฑุงู ููุฅุญุงูุงุชุ ูุงููุธุงุฆูุ
                                ูุงูุดุฑุงูุงุช ุงูุฌุฏูุฏุฉ.</p>
                        </div>
                        <div class="flex items-start">
                            <span class="text-xl text-yellow-600 ml-3 mt-1">โ</span>
                            <p class="flex-1 text-gray-700"><span class="font-semibold">ุงูุชุบุฐูุฉ ุงูุฑุงุฌุนุฉ ุงูุจููุงุกุฉ:</span>
                                ุงูุตุฏูู ุงูููุซูู ุจู ููุฏู ููุฏุงู ุตุงุฏูุงู ููุณุงุนุฏ ุงูุดุงุจ ุนูู ุชูููู ุฃููุงุฑู ููุฑุงุฑุงุชู ูุจู ุงุชุฎุงุฐ
                                ุฎุทูุงุช ูููุฉุ ููุง ูููู ูู ุงุญุชูุงููุฉ ุงููุดู.</p>
                        </div>
                        <div class="flex items-start">
                            <span class="text-xl text-yellow-600 ml-3 mt-1">โ</span>
                            <p class="flex-1 text-gray-700"><span class="font-semibold">ุชุญุณูู ุงููุฒุงุฌ ูุงูุฅูุชุงุฌูุฉ:</span>
                                ุงูุฏุนู ุงูุงุฌุชูุงุนู ูููู ูู ุงูุชูุชุฑ ูุงููููุ ููุง ูุณูุญ ููุดุงุจ ุจุงูุชุฑููุฒ ุจุดูู ุฃูุถู ุนูู ุฃูุฏุงูู
                                ูุชุญููู ูุณุชููุงุช ุฃุนูู ูู ุงูุฅูุชุงุฌูุฉ.</p>
                        </div>
                    </div>
                </section>

                <!-- Love Success -->
                <section class="p-6 bg-pink-50 rounded-xl border border-pink-200">
                    <h2 class="text-2xl font-bold text-pink-700 mb-4 flex items-center">
                        <span class="ml-2">โค๏ธ</span>
                        ุงูุญุจ ูุฒูุงุฏุฉ ุงููุฌุงุญ ุงูุดุฎุตู
                    </h2>

                    <div class="space-y-4">
                        <div class="flex items-start">
                            <span class="text-xl text-pink-600 ml-3 mt-1">โ</span>
                            <p class="flex-1 text-gray-700"><span class="font-semibold">ุงูุดุฑูู ููุฑุณุงุฉ ุนุงุทููุฉ:</span>
                                ุงูุนูุงูุงุช ุงูุนุงุทููุฉ ุงููุณุชูุฑุฉ ุชููุฑ ุฅุญุณุงุณุงู ุจุงูุฃูุงู ูุงููุฏูุ ููุง ูุนุฒุฒ ุงูุซูุฉ ุจุงูููุณ ููููู ูู
                                ุงูุดุนูุฑ ุจุงููุญุฏุฉุ ูููุง ุนุงููุงู ุฃุณุงุณูุงู ูููุฌุงุญ ุงูุดุฎุตู.</p>
                        </div>
                        <div class="flex items-start">
                            <span class="text-xl text-pink-600 ml-3 mt-1">โ</span>
                            <p class="flex-1 text-gray-700"><span class="font-semibold">ุงูุชุญููุฒ ุงููุดุชุฑู:</span> ุงูุดุฑูู
                                ุงูุฏุงุนู ูุดุฌุน ุนูู ุชุญููู ุงูุฃูุฏุงู ุงููุดุชุฑูุฉ ูุงูุดุฎุตูุฉุ ููุญูุฒ ุนูู ุชุจูู ููุท ุญูุงุฉ ุตุญู ููุชูุงุฒู
                                ูุนูุณ ุฅูุฌุงุจุงู ุนูู ุงูุฃุฏุงุก ุงูุนุงู.</p>
                        </div>
                        <div class="flex items-start">
                            <span class="text-xl text-pink-600 ml-3 mt-1">โ</span>
                            <p class="flex-1 text-gray-700"><span class="font-semibold">ุฅุฏุงุฑุฉ ุงูุฃุฒูุงุช:</span> ูู ุฃููุงุช
                                ุงูุดุฏุฉ ูุงููุดูุ ูุตุจุญ ุงูุดุฑูู ุงูุฑููุงูุณู ูุตุฏุฑุงู ุฃูููุงู ููุชุนุงูู ูุงูุฏุนู ุบูุฑ ุงููุดุฑูุทุ ููุง ููููู
                                ุงูุดุงุจ ูู ุชุฌุงูุฒ ุงูุนูุจุงุช ุจุณุฑุนุฉ ูุงููุถู ูุฏูุงู.</p>
                        </div>
                    </div>
                </section>

                <div class="text-center pt-8">
                    <button id="stats-button" onclick="toggleStats()"
                        class="bg-indigo-500 hover:bg-indigo-700 text-white font-bold py-3 px-8 rounded-full text-lg transition duration-300 ease-in-out transform hover:scale-105 shadow-xl flex items-center justify-center mx-auto">
                        <span class="ml-2">๐</span>
                        ุดุงูุฏ ุฅุญุตุงุฆูุงุช ุงููุฌุงุญ
                    </button>
                </div>

                <div id="static-stats" class="stats-card">
                    <h3 class="text-2xl font-extrabold text-blue-700 mb-6 text-center border-b pb-2">ุฅุญุตุงุฆูุงุช ุญูู
                        ุงูุนูุงูุงุช ูุงููุฌุงุญ</h3>
                    <div class="chart-container mb-8">
                        <canvas id="successChart"></canvas>
                    </div>

                    <!-- Detailed Stats -->
                    <div class="space-y-4 mobile-padding">
                        <div class="flex justify-between items-center p-3 bg-blue-50 rounded-lg">
                            <p class="font-semibold text-gray-800">ุงููุฌุงุญ ุงููููู (ุงูุตุฏุงูุฉ):</p>
                            <span class="text-2xl font-mono text-green-600">75%</span>
                        </div>
                        <p class="text-sm text-gray-600 mr-4">ูู ุงูุดุจุงุจ ูุนุฒูู ุนูุงูุงุชูู ุงููููุฉ ุจุฃุตุฏูุงุฆูู ูู ุชูููุฑ ุฃูู
                            ูุฑุตุฉ ุนูู ุฌุงุฏุฉ ููู.</p>

                        <div class="flex justify-between items-center p-3 bg-blue-50 rounded-lg">
                            <p class="font-semibold text-gray-800">ุงูุตุญุฉ ุงูููุณูุฉ (ุงูุญุจ):</p>
                            <span class="text-2xl font-mono text-red-600">40%</span>
                        </div>
                        <p class="text-sm text-gray-600 mr-4">ุงูุฎูุงุถ ูู ูุนุฏู ุงูุฅุฌูุงุฏ (Burnout) ูุฏู ุงูุดุจุงุจ ุงูุฐูู ูุชูุชุนูู
                            ุจุนูุงูุฉ ุนุงุทููุฉ ูุณุชูุฑุฉ ูุฏุงุนูุฉ.</p>

                        <div class="flex justify-between items-center p-3 bg-blue-50 rounded-lg">
                            <p class="font-semibold text-gray-800">ุงูููู ุงููุงุฏู:</p>
                            <span class="text-2xl font-mono text-indigo-600">30%</span>
                        </div>
                        <p class="text-sm text-gray-600 mr-4">ูุนุฏู ููู ุฃุนูู ูู ุงูุฑูุงุชุจ ุฎูุงู 5 ุณููุงุช ููุดุจุงุจ ุฐูู ุดุจูุงุช
                            ุงูุฏุนู ุงูุงุฌุชูุงุนู ุงููููุฉ (ุงูุฃุตุฏูุงุก ูุงูุดุฑูู).</p>
                    </div>
                </div>
            </div>

            <!-- Footer -->
            <footer class="p-6 md:p-8 bg-gray-100 text-center text-gray-600 rounded-b-3xl">
                <p class="text-sm">ุงูุนูุงูุงุช ุงูุตุญูุฉ ูู ุงุณุชุซูุงุฑ ูู ุงููุณุชูุจู ุงููููู ูุงูุนุงุทูู.</p>
            </footer>
        </div>
    </div>

    <!-- ============================================== -->
    <!--          Resources Page                        -->
    <!-- ============================================== -->
    <div id="resources-page" class="page-content pt-24 pb-12 px-4">
        <div class="max-w-4xl mx-auto bg-white rounded-3xl container-shadow overflow-hidden">
            <header class="bg-gradient-to-r from-green-600 to-teal-600 text-white p-10 text-center">
                <h1 class="text-3xl md:text-4xl font-extrabold mb-2">ููุงุฑุฏ ููุตุงุฆุญ ุนูููุฉ</h1>
                <p class="text-lg opacity-90">ุฃุฏูุงุช ูุงุณุชุฑุงุชูุฌูุงุช ูุจูุงุก ุนูุงูุงุช ุตุญูุฉ ููุงุฌุญุฉ</p>
            </header>

            <div class="p-8 md:p-12">
                <section>
                    <h2 class="text-2xl font-bold text-green-700 mb-6 text-center">ูุตุงุฆุญ ุนูููุฉ ูุชุญุณูู ุงูุนูุงูุงุช</h2>

                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                        <div class="bg-white p-6 rounded-xl border border-green-200 shadow-sm">
                            <h3 class="text-xl font-bold text-gray-800 mb-3 flex items-center">
                                <span class="ml-2">๐ฌ</span>
                                ุงูุชูุงุตู ุงููุนุงู
                            </h3>
                            <ul class="text-gray-600 space-y-2">
                                <li class="flex items-start">
                                    <span class="text-green-500 mt-1 ml-2">โ</span>
                                    <span>ุงุณุชูุน ุจูุนุงููุฉ ุฏูู ููุงุทุนุฉ</span>
                                </li>
                                <li class="flex items-start">
                                    <span class="text-green-500 mt-1 ml-2">โ</span>
                                    <span>ุนุจูุฑ ุนู ูุดุงุนุฑู ุจูุถูุญ ูุจุทุฑููุฉ ุจูุงุกุฉ</span>
                                </li>
                                <li class="flex items-start">
                                    <span class="text-green-500 mt-1 ml-2">โ</span>
                                    <span>ุงุณุชุฎุฏู ูุบุฉ ุงูุฌุณุฏ ุงูุฅูุฌุงุจูุฉ</span>
                                </li>
                            </ul>
                        </div>

                        <div class="bg-white p-6 rounded-xl border border-blue-200 shadow-sm">
                            <h3 class="text-xl font-bold text-gray-800 mb-3 flex items-center">
                                <span class="ml-2">โ๏ธ</span>
                                ุงูููุงุฒูุฉ ุจูู ุงูุนูุงูุงุช
                            </h3>
                            <ul class="text-gray-600 space-y-2">
                                <li class="flex items-start">
                                    <span class="text-blue-500 mt-1 ml-2">โ</span>
                                    <span>ุฎุตุต ููุชุงู ููุชุธูุงู ููุฃุตุฏูุงุก ูุงูุดุฑูู</span>
                                </li>
                                <li class="flex items-start">
                                    <span class="text-blue-500 mt-1 ml-2">โ</span>
                                    <span>ูุง ุชููู ุงูุนูุงูุงุช ุงููุฏููุฉ ูุตุงูุญ ุงูุฌุฏูุฏุฉ</span>
                                </li>
                                <li class="flex items-start">
                                    <span class="text-blue-500 mt-1 ml-2">โ</span>
                                    <span>ุชุนูู ุฃู ุชููู "ูุง" ุนูุฏ ุงูุญุงุฌุฉ</span>
                                </li>
                            </ul>
                        </div>
                    </div>
                </section>
            </div>

            <footer class="p-6 md:p-8 bg-gray-100 text-center text-gray-600 rounded-b-3xl">
                <p class="text-sm">ุงูุงุณุชุซูุงุฑ ูู ุงูุนูุงูุงุช ูู ุงุณุชุซูุงุฑ ูู ุณุนุงุฏุชู ููุฌุงุญู.</p>
            </footer>
        </div>
    </div>

    <!-- Custom Scripts -->
    <script>
        let chartDrawn = false;
        const apiKey = ""; // API Key placeholder

        // ==============================================
        //           LLM & API Functions
        // ==============================================

        function showLLMModal(title, content, action, inputPlaceholder, buttonText) {
            const modalContainer = document.getElementById('llm-modal-container');
            if (!modalContainer) return;

            modalContainer.innerHTML = `
                <div class="llm-modal-backdrop" onclick="closeLLMModal()">
                    <div class="llm-modal" onclick="event.stopPropagation()">
                        <div class="flex justify-between items-center border-b pb-4 mb-6">
                            <h3 class="text-2xl font-bold text-blue-800">${title}</h3>
                            <button onclick="closeLLMModal()" class="text-gray-400 hover:text-red-500 transition p-2 rounded-full hover:bg-red-50">
                                <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
                                </svg>
                            </button>
                        </div>
                        <p class="text-gray-600 mb-6 text-lg leading-relaxed">${content}</p>
                        <textarea id="llm-input" rows="4" class="w-full p-4 border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent transition resize-none text-gray-700 bg-gray-50 focus:bg-white" placeholder="${inputPlaceholder}"></textarea>
                        <button 
                            id="llm-action-button"
                            onclick="${action}"
                            class="mt-6 w-full bg-gradient-to-r from-blue-600 to-indigo-600 hover:from-blue-700 hover:to-indigo-700 text-white font-bold py-3 px-6 rounded-xl transition duration-300 shadow-lg flex items-center justify-center text-lg"
                        >
                            <span id="llm-button-text">${buttonText}</span>
                            <div id="llm-spinner" class="hidden animate-spin rounded-full h-6 w-6 border-b-2 border-white ml-3"></div>
                        </button>
                        
                        <div id="llm-output-container" class="mt-8 p-6 bg-blue-50 border border-blue-100 rounded-xl hidden animate-fade-in">
                            <h4 class="font-bold text-blue-900 mb-3 border-b border-blue-200 pb-2 flex items-center">
                                <span class="mr-2">๐ก</span> ูุชุงุฆุฌ ุงูุชุญููู
                            </h4>
                            <div id="llm-output" class="gemini-response text-gray-800 leading-relaxed"></div>
                        </div>
                    </div>
                </div>
            `;
            modalContainer.classList.remove('hidden');
            document.body.style.overflow = 'hidden'; // Prevent background scrolling
        }

        function closeLLMModal() {
            const modalContainer = document.getElementById('llm-modal-container');
            if (modalContainer) {
                modalContainer.classList.add('hidden');
                modalContainer.innerHTML = '';
                document.body.style.overflow = ''; // Restore scrolling
            }
        }

        async function fetchGeminiContent(payload, retries = 3) {
            const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-05-20:generateContent?key=${apiKey}`;

            for (let i = 0; i < retries; i++) {
                try {
                    const response = await fetch(apiUrl, {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify(payload)
                    });

                    if (response.ok) {
                        const result = await response.json();
                        return result.candidates?.[0]?.content?.parts?.[0]?.text || 'ูู ูุชู ุงูุญุตูู ุนูู ุฅุฌุงุจุฉ ูุงุถุญุฉ.';
                    }

                    if (response.status === 429 || response.status >= 500) {
                        if (i < retries - 1) {
                            await new Promise(resolve => setTimeout(resolve, Math.pow(2, i) * 1000));
                            continue;
                        }
                    }

                    const errorBody = await response.json();
                    throw new Error(`API Error: ${response.status} - ${errorBody.error?.message || response.statusText}`);

                } catch (error) {
                    console.error("Gemini API call failed:", error);
                    if (i === retries - 1) throw new Error("ูุดู ุงูุงุชุตุงู ุจุฎุฏูุฉ ุงูุฐูุงุก ุงูุงุตุทูุงุนู.");
                }
            }
        }

        // Feature 1: Analyze Relationship Question
        async function analyzeRelationshipQuestion() {
            const inputElement = document.getElementById('llm-input');
            const outputElement = document.getElementById('llm-output');
            const outputContainer = document.getElementById('llm-output-container');
            const button = document.getElementById('llm-action-button');
            const buttonTextSpan = document.getElementById('llm-button-text');
            const spinner = document.getElementById('llm-spinner');

            const userQuery = inputElement ? inputElement.value.trim() : '';

            if (!userQuery) {
                alert('ุงูุฑุฌุงุก ุฅุฏุฎุงู ุณุคุงูู ุฃููุงู.');
                return;
            }

            setLoadingState(true, button, buttonTextSpan, spinner, outputContainer, outputElement);

            try {
                const systemPrompt = "ุฃูุช ูุณุชุดุงุฑ ุนูุงูุงุช ุฎุจูุฑ ููุดุจุงุจ. ุญูู ุงูุณุคุงู ููุฏู ูุตูุญุฉ ุนูููุฉ ููุชูุงุฒูุฉ ูู ููุงุท ูุญุฏุฏุฉ. ุฑูุฒ ุนูู ุงูุชูุงุฒู ุจูู ุงูุญุจ ูุงูุตุฏุงูุฉ.";
                const payload = {
                    contents: [{ parts: [{ text: `ุงูุณุคุงู: ${userQuery}` }] }],
                    systemInstruction: { parts: [{ text: systemPrompt }] },
                };

                const responseText = await fetchGeminiContent(payload);
                outputElement.innerHTML = marked.parse(responseText);
                outputContainer.classList.remove('hidden');

            } catch (error) {
                outputElement.innerHTML = `<p class="text-red-500 font-bold">ุนุฐุฑุงูุ ุญุฏุซ ุฎุทุฃ: ${error.message}</p>`;
                outputContainer.classList.remove('hidden');
            } finally {
                setLoadingState(false, button, buttonTextSpan, spinner);
            }
        }

        // Feature 2: Draft Goal
        async function draftPersonalGoal() {
            const inputElement = document.getElementById('llm-input');
            const outputElement = document.getElementById('llm-output');
            const outputContainer = document.getElementById('llm-output-container');
            const button = document.getElementById('llm-action-button');
            const buttonTextSpan = document.getElementById('llm-button-text');
            const spinner = document.getElementById('llm-spinner');

            const userGoalIdea = inputElement ? inputElement.value.trim() : '';

            if (!userGoalIdea) {
                alert('ุงูุฑุฌุงุก ุฅุฏุฎุงู ููุฑุฉ ุงููุฏู ุฃููุงู.');
                return;
            }

            setLoadingState(true, button, buttonTextSpan, spinner, outputContainer, outputElement);

            try {
                const systemPrompt = "ุฃูุช ูุฏุฑุจ ุญูุงุฉ (Life Coach). ุญูู ููุฑุฉ ุงููุณุชุฎุฏู ุฅูู ูุฏู ุฐูู (SMART Goal) ููุฏู 3 ุฎุทูุงุช ุนูููุฉ ูุชุญูููู.";
                const payload = {
                    contents: [{ parts: [{ text: `ููุฑุฉ ุงููุฏู: ${userGoalIdea}` }] }],
                    systemInstruction: { parts: [{ text: systemPrompt }] },
                };

                const responseText = await fetchGeminiContent(payload);
                outputElement.innerHTML = marked.parse(responseText);
                outputContainer.classList.remove('hidden');

            } catch (error) {
                outputElement.innerHTML = `<p class="text-red-500 font-bold">ุนุฐุฑุงูุ ุญุฏุซ ุฎุทุฃ: ${error.message}</p>`;
                outputContainer.classList.remove('hidden');
            } finally {
                setLoadingState(false, button, buttonTextSpan, spinner);
            }
        }

        function setLoadingState(isLoading, button, textSpan, spinner, container, output) {
            if (isLoading) {
                textSpan.textContent = 'ุฌุงุฑู ุงููุนุงูุฌุฉ...';
                spinner.classList.remove('hidden');
                button.disabled = true;
                button.classList.add('opacity-75', 'cursor-not-allowed');
                if (container) container.classList.add('hidden');
                if (output) output.innerHTML = '';
            } else {
                textSpan.textContent = 'โจ ุชูููุฐ';
                spinner.classList.add('hidden');
                button.disabled = false;
                button.classList.remove('opacity-75', 'cursor-not-allowed');
            }
        }

        // ==============================================
        //           UI & Navigation Functions
        // ==============================================

        function drawChart() {
            if (chartDrawn) return;
            const ctx = document.getElementById('successChart');
            if (!ctx) return;

            new Chart(ctx, {
                type: 'bar',
                data: {
                    labels: ['ุงููุฌุงุญ ุงููููู', 'ุงูุตุญุฉ ุงูููุณูุฉ', 'ุงูููู ุงููุงุฏู', 'ุงูุชูุงุฒู ุงูุนุงุทูู', 'ุงูุชุทูุฑ ุงูุดุฎุตู'],
                    datasets: [{
                        label: 'ูุณุจุฉ ุงูุชุฃุซูุฑ ุงูุฅูุฌุงุจู (%)',
                        data: [75, 85, 45, 90, 60],
                        backgroundColor: [
                            'rgba(59, 130, 246, 0.7)',
                            'rgba(236, 72, 153, 0.7)',
                            'rgba(16, 185, 129, 0.7)',
                            'rgba(245, 158, 11, 0.7)',
                            'rgba(139, 92, 246, 0.7)'
                        ],
                        borderColor: [
                            'rgb(59, 130, 246)',
                            'rgb(236, 72, 153)',
                            'rgb(16, 185, 129)',
                            'rgb(245, 158, 11)',
                            'rgb(139, 92, 246)'
                        ],
                        borderWidth: 2,
                        borderRadius: 8,
                        borderSkipped: false
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    animation: {
                        duration: 2000,
                        easing: 'easeOutQuart'
                    },
                    plugins: {
                        legend: { display: false },
                        tooltip: {
                            backgroundColor: 'rgba(17, 24, 39, 0.9)',
                            titleFont: { family: 'Inter', size: 14 },
                            bodyFont: { family: 'Inter', size: 13 },
                            padding: 12,
                            cornerRadius: 8
                        }
                    },
                    scales: {
                        y: {
                            beginAtZero: true,
                            max: 100,
                            grid: { color: 'rgba(0, 0, 0, 0.05)' },
                            ticks: { font: { family: 'Inter' } }
                        },
                        x: {
                            grid: { display: false },
                            ticks: { font: { family: 'Inter', weight: 'bold' } }
                        }
                    }
                }
            });
            chartDrawn = true;
        }

        function showPage(pageId) {
            // Hide all pages
            document.querySelectorAll('.page-content').forEach(page => {
                page.classList.remove('active');
                setTimeout(() => {
                    if (!page.classList.contains('active')) page.style.display = 'none';
                }, 500); // Wait for transition
            });

            // Show target page
            const targetPage = document.getElementById(pageId);
            if (targetPage) {
                targetPage.style.display = 'block';
                // Small delay to allow display:block to apply before opacity transition
                setTimeout(() => targetPage.classList.add('active'), 10);
            }

            // Update Navigation
            document.querySelectorAll('.nav-btn').forEach(btn => {
                const btnPageId = btn.getAttribute('onclick').match(/'([^']+)'/)[1];
                if (btnPageId === pageId) btn.classList.add('active');
                else btn.classList.remove('active');
            });

            closeLLMModal();
            stopReading(); // Stop TTS when changing pages

            // Navbar visibility logic
            const mainNav = document.getElementById('main-nav');
            if (pageId === 'presentation-page') {
                mainNav.classList.add('hidden');
                mainNav.classList.remove('flex');
            } else {
                mainNav.classList.remove('hidden');
                mainNav.classList.add('flex');
            }
        }

        function toggleStats() {
            const statsCard = document.getElementById('static-stats');
            const statsButton = document.getElementById('stats-button');

            if (!statsCard || !statsButton) return;

            if (statsCard.classList.contains('visible')) {
                statsCard.classList.remove('visible');
                statsButton.innerHTML = '<span class="ml-2">๐</span> ุดุงูุฏ ุฅุญุตุงุฆูุงุช ุงููุฌุงุญ';
            } else {
                statsCard.classList.add('visible');
                statsButton.innerHTML = '<span class="ml-2">โ</span> ุฅุฎูุงุก ุงูุฅุญุตุงุฆูุงุช';
                setTimeout(drawChart, 300);
            }
        }

        function updateProgress(percent) {
            const progressBar = document.getElementById('progress-bar');
            if (progressBar) progressBar.style.width = `${percent}%`;
        }

        // ==============================================
        //           Text-to-Speech (TTS)
        // ==============================================
        let isReading = false;
        let speechUtterance = null;

        function toggleReader() {
            if (isReading) {
                stopReading();
            } else {
                startReading();
            }
        }

        function startReading() {
            if (!window.speechSynthesis) {
                alert("ุนุฐุฑุงูุ ูุชุตูุญู ูุง ูุฏุนู ุฎุงุตูุฉ ุงููุฑุงุกุฉ ุงูุตูุชูุฉ.");
                return;
            }

            // Get visible text content
            const activePage = document.querySelector('.page-content.active');
            if (!activePage) return;

            const textToRead = activePage.innerText;

            speechUtterance = new SpeechSynthesisUtterance(textToRead);
            speechUtterance.lang = 'ar-SA'; // Arabic
            speechUtterance.rate = 0.9; // Slightly slower for clarity
            speechUtterance.pitch = 1;

            speechUtterance.onend = () => {
                isReading = false;
                updateReaderButton(false);
            };

            window.speechSynthesis.speak(speechUtterance);
            isReading = true;
            updateReaderButton(true);
        }

        function stopReading() {
            if (window.speechSynthesis) {
                window.speechSynthesis.cancel();
            }
            isReading = false;
            updateReaderButton(false);
        }

        function updateReaderButton(active) {
            const btn = document.getElementById('reader-btn');
            if (!btn) return;

            if (active) {
                btn.classList.add('bg-red-500', 'animate-pulse');
                btn.classList.remove('bg-green-600');
                btn.innerHTML = '๐'; // Mute icon
            } else {
                btn.classList.remove('bg-red-500', 'animate-pulse');
                btn.classList.add('bg-green-600');
                btn.innerHTML = '๐'; // Speaker icon
            }
        }

        // ==============================================
        //           Markdown Parser
        // ==============================================
        const marked = {
            parse: function (markdown) {
                let html = markdown
                    .replace(/### (.*)/g, '<h4 class="text-lg font-bold text-blue-700 mt-3 mb-2">$1</h4>')
                    .replace(/## (.*)/g, '<h3 class="text-xl font-bold text-gray-800 mt-4 mb-2">$1</h3>')
                    .replace(/\*\*(.*?)\*\*/g, '<strong class="text-blue-900">$1</strong>')
                    .replace(/^\* (.*)/gm, '<li class="mb-1">$1</li>');

                if (html.includes('<li>')) {
                    html = html.replace(/((<li.*>.*<\/li>\s*)+)/g, '<ul class="list-disc mr-5 mb-4 text-gray-700">$1</ul>');
                }

                return html.split('\n\n').map(p => {
                    if (p.trim().startsWith('<') || !p.trim()) return p;
                    return `<p class="mb-2 text-gray-700">${p.trim()}</p>`;
                }).join('');
            }
        };

        // Initialization
        document.addEventListener('DOMContentLoaded', () => {
            showPage('presentation-page');
            setTimeout(() => updateProgress(100), 800);
        });
    </script>
</body>

</html>
